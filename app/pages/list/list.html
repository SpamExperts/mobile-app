<ion-header>
    <ion-navbar color="se-theme-color">
        <button ion-button menuToggle="left" left [disabled]="this.listService.checkedNumber>0">
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>
            <div class="header-div">
                <p class="title"> {{ messageType}} spam messages </p>
                <p *ngIf="this.permissionService.permissions.userType == 'admin' " class="domain"> {{ this.listService.currentDomain }} </p>
                <p *ngIf="this.permissionService.permissions.userType != 'admin' " class="domain"> {{ this.permissionService.username }} </p>
            </div>
        </ion-title>
        <button ion-button menuToggle="right" right [disabled]="this.listService.checkedNumber>0">
            <ion-icon name="search"></ion-icon>
        </button>
    </ion-navbar>
</ion-header>

//it belongs to the header
<div class="date-span">
    <span> {{ this.listService.datesInterval }} </span>
</div>

<ion-content padding>

    <ion-refresher (ionRefresh)="refresh($event)">
        <ion-refresher-content pullingText="Release me" refreshingSpinner="ios"></ion-refresher-content>
    </ion-refresher>

    <div *ngIf="this.listService.infoMessageShown">
        <ion-card-content class="alert-message" *ngIf="this.listService.infoMessageShown && this.permissionService.permissions.userType =='admin' " >
            <ion-row>
                <ion-col col-11 class="text-alert">
                    <ion-label text-wrap class="card-text">{{ this.listService.infoMessage }}</ion-label>
                </ion-col>
                <ion-col col-1 class="button-alert">
                    <button *ngIf="this.listService.infoMessageShown && this.permissionService.permissions.userType =='admin' " class="card" #alertButton (click)="closeAlert()" clear>
                        <ion-icon ios="ios-close" md="md-close" float-right></ion-icon>
                    </button>
                </ion-col>
            </ion-row>

        </ion-card-content>

    </div>



    <div class="refresh-div" *ngIf="!items.length">
        <span> No entries. Pull to refresh... </span>
    </div>

    <ion-list [hidden]="noItems" [virtualScroll]="items" [approxItemHeight]="'150px'"  [bufferRatio]="3">
        <ion-item
                class="listitem"
                *virtualItem="let item;  let idx = index;"
                (click)="itemTapped($event, item)"
                (ion-long-tap)="log()"
        >
            <ion-row>
                <ion-col col-10 class="padding-left-10">
                    <div class="message-title">
                        {{listService.dateConvert(item.datetime)}}
                        <span class="spam-icon">spam</span>
                    </div>
                </ion-col>
                <ion-col col-2>
                    <div class="message-title"> {{listService.to12hoursShort(item.datetime)}} </div>
                </ion-col>
            </ion-row>
            <ion-row class="content">
                <ion-col col-10 class="padding-left-10">
                    <div class="grayedout-text sender">{{item.sender}}</div>
                    <div class="subject">{{item.subject_header}}</div>
                </ion-col>
                <ion-col col-2>
                    <ion-icon *ngIf="!item.checked" name="square-outline" class="checkbox gray-checkbox" (click)="changeCheckedItems(item,$event)"></ion-icon>
                    <ion-icon *ngIf="item.checked" name="checkbox" class="checkbox" (click)="changeCheckedItems(item,$event)"></ion-icon>
                </ion-col>
            </ion-row>
        </ion-item>
    </ion-list>

    <ion-infinite-scroll (ionInfinite)="doInfinite($event)" threshold="100px">
        <ion-infinite-scroll-content
                loadingSpinner="bubbles"
                loadingText="Loading more data...">
        </ion-infinite-scroll-content>
    </ion-infinite-scroll>

</ion-content>

<ion-footer class="footer" *ngIf="this.listService.checkedNumber> 0">
    <ion-toolbar color="metalic-gray" class="toolbar">
        <ion-row>
            <button col-4 (click)="this.actionService.action('release')">
                <ion-icon name="checkmark"></ion-icon>
                &nbsp;Release
            </button>
            <button col-4 (click)="this.actionService.action('remove_from_quarantine')">
                <ion-icon name="close"></ion-icon>
                &nbsp;Remove
            </button>
            <button col-4 (click)="openPopover($event)">
                <ion-icon  class="rotate" name="more"></ion-icon>
                &nbsp;More
                <div (tap)="clearSelection()" class="small-div"> {{listService.checkedNumber}} </div>
            </button>
        </ion-row>
    </ion-toolbar>
</ion-footer>